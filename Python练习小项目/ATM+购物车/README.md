## 需求分析

### 1、 需求
~~~shell
1. 额度 15000或自定义
2. 实现购物商城，买东西加入 购物车，调用信用卡接口结账
3. 可以提现，手续费5%
4. 每月22号出账单，每月10号为还款日，过期未还，按欠款总额 万分之5 每日计息
5. 支持多账户登录
6. 支持账户间转账
7. 记录每月日常消费账单
8. 提供还款接口
9. ATM记录操作日志 
10. 提供管理接口，包括添加账户、用户额度，冻结账户等。。。
11. 用户认证用装饰器
~~~

### 2、功能梳理
~~~shell script
1、注册
2、登录
3、查看余额
4、提现
5、转账
6、还款
7、查看流水
8、购物
9、查看购物车
10、管理员
~~~
### 3、项目目录
~~~shell script
ATM
    conf  --> 配置文件
      settings.py
    data  --> 数据存储
      user_data --> 用户信息
      goods_data --> 用户历史订单
    lib   --> 公共方法
      common.py         --> 公共方法
    src   --> 核心接口
      main.py --> 用户视图
      shopping_center.py --> 购物中心功能接口
      user_auth.py       --> 用户中心功能接口
      admin_func.py      --> 管理员功能接口
    logs  --> 日志文件
    run.sh --> 启动
~~~
### 4、功能流程
* 注册
~~~shell script
1) 用户输入用户名密码 --> 校验用户是否存在 --> 存在，提示用户，继续注册 --> 不存在保存用户注册信息
2) 用户输入用户名密码 --> 判断用户是否存在 --> 存在继续校验用户名密码 --> 不存在 打印信息
~~~
* 查看余额
~~~shell script
1) 获取用户数据 --> 获取余额
~~~
* 提现
~~~shell script
1) 用户输入提现金额 --> 调用接口
2) 判断用户提现金额，是否小于等于余额  --> 提现手续费从提现金额中扣除,手续费5%(实际提现金额不等于提现金额)
3) 调用接口获取用户数据，用户金额减去提现金额 --> 保存修改余额后的用户数据
~~~
* 转账
~~~shell script
1) 用户输入转账金额，以及转给的用户 --> 调用转账接口
2) 获取用户字典 --> 判断用户余额是否小于转账金额 --> 判断转账用户是否存在
3) 当前用户减去转账金额，对方账户加转过去的金额 --> 保存双方账户金额变动后的数据
~~~
* 还款
~~~shell script
1) 用户输入还款金额 --> 判断金额是否合法
2) 获取用户字典 --> 余额追加 --> 返回数据
~~~
* 查看流水
~~~shell script
1) 记录流水 --> 用户涉及到金钱操作
2) 保存流水至用户字典数据
~~~
* 购物中心
~~~shell script
1) 查看商品 --> 商品库存(列表) ["笔记本","12000"]
2) 初始化用户购物车 --> 选择商品添加购物车 --> 购物车 {name1:[1200,1],name2:[10,2]}
3) 调用结算接口结算 --> 获取用户用户余额 --> 余额不足,重新选购商品(购物车初始化),--> 保存用户最新字典数据
4) 购物写入订单
~~~
* 历史订单中心
~~~shell script
1) 订单模板
    字典保存:
      {naem:[123,1],name2:[1,1]}
~~~

* 管理员
~~~shell script
1、新建用户 --> 调用注册功能
2、删除用户 --> 判断用户是否存在 --> 删除用户数据文件
3、冻结用户 --> 获取字典修改用户状态(用户冻结后，解锁需要手动修改)
4、提额    --> 获取字典修改用户状态
5、退出
~~~